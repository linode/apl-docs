"use strict";(self.webpackChunkredkubes_github_io=self.webpackChunkredkubes_github_io||[]).push([[1218],{1538:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"get-started/installation/akamai-connected-cloud","title":"Deploy Akamai App Platform on LKE","description":"Create a Kubernetes cluster with App Platform enabled","source":"@site/docs/get-started/installation/akamai-connected-cloud.md","sourceDirName":"get-started/installation","slug":"/get-started/installation/akamai-connected-cloud","permalink":"/docs/get-started/installation/akamai-connected-cloud","draft":false,"unlisted":false,"editUrl":"https://github.com/linode/linode.github.io/tree/main/docs/get-started/installation/akamai-connected-cloud.md","tags":[],"version":"current","frontMatter":{"slug":"akamai-connected-cloud","title":"Deploy Akamai App Platform on LKE","sidebar_label":"LKE (automatic)"},"sidebar":"mainSidebar","previous":{"title":"Overview","permalink":"/docs/get-started/installation/overview"},"next":{"title":"LKE (manual)","permalink":"/docs/get-started/installation/linode"}}');var s=t(4848),r=t(8453);const i={slug:"akamai-connected-cloud",title:"Deploy Akamai App Platform on LKE",sidebar_label:"LKE (automatic)"},a="Deploy Akamai App Platform on LKE",l={},d=[{value:"Create a Kubernetes cluster with App Platform enabled",id:"create-a-kubernetes-cluster-with-app-platform-enabled",level:2},{value:"Access and download your Kubeconfig",id:"access-and-download-your-kubeconfig",level:2},{value:"Obtain the initial access credentials and sign in",id:"obtain-the-initial-access-credentials-and-sign-in",level:2},{value:"Provision Object Storage for the App Platform",id:"provision-object-storage-for-the-app-platform",level:2},{value:"Onboard Teams and Users",id:"onboard-teams-and-users",level:2},{value:"Known issues",id:"known-issues",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"deploy-akamai-app-platform-on-lke",children:"Deploy Akamai App Platform on LKE"})}),"\n",(0,s.jsx)(n.h2,{id:"create-a-kubernetes-cluster-with-app-platform-enabled",children:"Create a Kubernetes cluster with App Platform enabled"}),"\n",(0,s.jsxs)(n.p,{children:["These instructions provide the basic steps for deploying App Platform on an LKE cluster. For more complete instructions on creating an LKE cluster, see the ",(0,s.jsx)(n.a,{href:"https://techdocs.akamai.com/cloud-computing/docs/create-a-cluster",children:"Create a cluster"})," guide."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Log in to your Cloud Manager account."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Select Kubernetes from the main navigation menu and then click ",(0,s.jsx)(n.strong,{children:"Create Cluster"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.em,{children:"Create a Kubernetes Cluster"})," page appears. At the top of the page, select the following options"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["In the ",(0,s.jsx)(n.strong,{children:"Cluster Label"})," field, provide a name for your cluster. The name must be unique between all of the clusters on your account. This name is how you identify your cluster in Cloud Manager."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["From the ",(0,s.jsx)(n.strong,{children:"Region"})," dropdown menu, select the region where you would like your cluster to reside."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["From the ",(0,s.jsx)(n.strong,{children:"Version"})," dropdown menu, select a Kubernetes version to use on your cluster."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsxs)(n.li,{children:["In the ",(0,s.jsx)(n.strong,{children:"App Platform"})," section, select ",(0,s.jsx)(n.em,{children:"Yes, enable App Platform for LKE"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["App Platform requires HA control plane. When you enable the ",(0,s.jsx)(n.strong,{children:"App Platform"})," setting, the ",(0,s.jsx)(n.strong,{children:"HA control plane"})," setting is automatically enabled."]})}),"\n",(0,s.jsxs)(n.ol,{start:"5",children:["\n",(0,s.jsxs)(n.li,{children:["In the ",(0,s.jsx)(n.strong,{children:"Add Node Pools"})," section, select the required resources for the worker nodes. To the right of each plan, select the plus + and minus - to add or remove a node to a node pool one at time."]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["During the beta period, App Platform requires a node pool with at least ",(0,s.jsx)(n.strong,{children:"3 worker"})," nodes with a minimum of ",(0,s.jsx)(n.strong,{children:"8 GB memory"})," and ",(0,s.jsx)(n.strong,{children:"4 CPUs"})," per node."]})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"App Platform is not supported in combination with Shared CPU Linode plans."})}),"\n",(0,s.jsxs)(n.ol,{start:"6",children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Select ",(0,s.jsx)(n.strong,{children:"Add"})," to include the node pool in your configuration. If you need more hardware resources after you deploy your cluster, you can always ",(0,s.jsx)(n.a,{href:"https://techdocs.akamai.com/cloud-computing/docs/manage-nodes-and-node-pools",children:"edit your Node Pool"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Once a node pool has been added to your configuration, it is listed in the ",(0,s.jsx)(n.strong,{children:"Cluster Summary"})," section detailing your cluster's hardware resources and monthly cost. Additional pools can be added before finalizing the cluster creation process by repeating the previous step for each additional pool."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"The App Platform for LKE requires HA control plane to be enabled. When App Platform for LKE is enabled, HA control plane will automatically be enabled."})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"It is advised to configure Control Plane ACL. This will restrict access to the Kubernetes API. The ACL will NOT restrict access to the App Platform Console!"})}),"\n",(0,s.jsxs)(n.ol,{start:"5",children:["\n",(0,s.jsx)(n.li,{children:"In the Add Node Pools section, select the required resources for the Linode worker node(s). To the right of each plan, select the plus + and minus - to add or remove a Linode to a node pool one at time."}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["During the Beta period the App Platform for LKE requires a node pool with at least ",(0,s.jsx)(n.strong,{children:"3 worker"})," nodes with a minimum of ",(0,s.jsx)(n.strong,{children:"16 GB memory"})," and ",(0,s.jsx)(n.strong,{children:"4 CPUs"})," per node. Make sure to select the required Linode plan."]})}),"\n",(0,s.jsxs)(n.ol,{start:"6",children:["\n",(0,s.jsxs)(n.li,{children:["Select Add to include the node pool in your configuration. If you decide that you need more hardware resources after you deploy your cluster, you can always ",(0,s.jsx)(n.a,{href:"https://techdocs.akamai.com/cloud-computing/docs/manage-nodes-and-node-pools",children:"edit your Node Pool"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"The App Platform for LKE is not supported in combination with Shared CPU."})}),"\n",(0,s.jsxs)(n.ol,{start:"7",children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Once a pool has been added to your configuration, it is listed in the Cluster Summary on the right-hand side of Cloud Manager detailing your cluster's hardware resources and monthly cost. Additional pools can be added before finalizing the cluster creation process by repeating the previous step for each additional pool."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["When you are satisfied with the configuration of your cluster, click the ",(0,s.jsx)(n.strong,{children:"Create Cluster"})," button. This creates your cluster and displays the cluster's details page in the Cloud Manager. Once the cluster has been fully provisioned, App Platform is installed. ",(0,s.jsx)(n.strong,{children:"The installation of App Platform takes around 10 to 15 minutes."})," When the installation is finished, the URL of the ",(0,s.jsx)(n.strong,{children:"Portal Endpoint"})," is displayed in the ",(0,s.jsx)(n.strong,{children:"App Platform"})," section. The progress of the installation is checked every 60 seconds. When the installation is still in progress, the message \u201cInstallation in progress\u201d is displayed instead of the URL of the Portal Endpoint."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"When the installation of both the LKE cluster and App Platform is complete, click on the provided URL of the Portal Endpoint:"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"details-page",src:t(8141).A+"",width:"2212",height:"1302"})}),"\n",(0,s.jsx)(n.p,{children:"This takes you to App Platform Portal login page:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"sign-in",src:t(5215).A+"",width:"2674",height:"1636"})}),"\n",(0,s.jsxs)(n.ol,{start:"10",children:["\n",(0,s.jsx)(n.li,{children:"Continue with the next steps to get the initial credentials needed to sign in."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"access-and-download-your-kubeconfig",children:"Access and download your Kubeconfig"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"To access your cluster's Kubeconfig, log in to your Cloud Manager account and navigate to the Kubernetes section."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["From the Kubernetes listing page, click on your cluster's ",(0,s.jsx)(n.em,{children:"more options"})," ellipsis and select ",(0,s.jsx)(n.strong,{children:"Download Kubeconfig"}),". The file is saved to your computer's downloads folder."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Open a terminal shell and save your Kubeconfig file's path to the $KUBECONFIG environment variable. In the example command, the Kubeconfig file is located in the ",(0,s.jsx)(n.strong,{children:"Downloads"})," folder, but you should alter this line with this folder's location on your computer:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"export KUBECONFIG=~/Downloads/kubeconfig.yaml\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"obtain-the-initial-access-credentials-and-sign-in",children:"Obtain the initial access credentials and sign in"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Perform the following command to obtain the user name:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl get secret platform-admin-initial-credentials -n keycloak --template={{.data.username}} | base64 -d\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Perform the following command to obtain the initial password:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl get secret platform-admin-initial-credentials -n keycloak --template={{.data.password}} | base64 -d\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Navigate back to App Platform Portal login page in your web browser and sign in with these credentials."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The first time you log in, you are prompted to change your password. Enter your new password and click ",(0,s.jsx)(n.strong,{children:"Submit"}),". If you need to change your password later, see the ",(0,s.jsx)(n.a,{href:"http://localhost:3001/docs/for-ops/how-to/change-user-passwords",children:"Change user passwords"})," and ",(0,s.jsx)(n.a,{href:"http://localhost:3001/docs/for-ops/how-to/change-admin-password",children:"Change admin password"})," guides."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["After changing your password, you are taken to the main dashboard. The first time you log in, you are prompted to configure Object Storage. See the ",(0,s.jsx)(n.a,{href:"#provision-object-storage-for-the-app-platform",children:"Provision Object Storage for the App Platform"})," section below."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"provision-object-storage-for-the-app-platform",children:"Provision Object Storage for the App Platform"}),"\n",(0,s.jsxs)(n.p,{children:["Aftering logging in to the App Platform Portal for the first time, you should configure Object Storage. This is not required, but strongly recommended as this will prevent ",(0,s.jsx)(n.em,{children:"out of disk space errors"})," when using Storage Volumes for integrated applications. Using Object Storage also has the advantage of creating backups of all databases used by the platform."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"Object Storage Wizard"})," screen is automatically displayed when logging in for the first time. This walks you through adding an API token so that it can automatically create amd configure all required Object Storage buckets. Click ",(0,s.jsx)(n.strong,{children:"Yes"})," to continue with this process. If you don\u2019t want the platform to create all the required buckets, then click ",(0,s.jsx)(n.strong,{children:"Skip for now"}),". In this case, some features like creating backups of databases will not be available. You can start the Wizard at any time in the Portal (Platform View: Maintenance, Show Object Storage Wizard)."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Follow the instructions to ",(0,s.jsx)(n.a,{href:"https://techdocs.akamai.com/linode-api/reference/get-started#personal-access-tokens",children:"create a Personal Access Token"}),". The API token only needs ",(0,s.jsx)(n.strong,{children:"Read/Write"})," to Object Storage. Once created, save or copy the generated access token."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Paste the API token into the wizard and select the region where the buckets should be created from the dropdown list. This region should match the region you selected when deploying your LKE cluster."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Click ",(0,s.jsx)(n.code,{children:"Submit"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["All the required buckets are now created and the platform will be configured to use Object Storage to store persistent data and backups. The provided Personal Access Token will not be stored. The created buckets will have the ",(0,s.jsx)(n.code,{children:"<cluster-id>"})," prefix`"]}),"\n",(0,s.jsx)(n.h2,{id:"onboard-teams-and-users",children:"Onboard Teams and Users"}),"\n",(0,s.jsxs)(n.p,{children:["You can now start enabling Applications, onboarding ",(0,s.jsx)(n.a,{href:"../../for-ops/console/teams",children:"Teams"})," and create ",(0,s.jsx)(n.a,{href:"../../for-ops/console/user-management",children:"Users"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["We recommend to go through the ",(0,s.jsx)(n.a,{href:"../labs/overview",children:"Hands-on Labs"})," to learn how to take advantage of the Akamai App Platform."]}),"\n",(0,s.jsx)(n.h2,{id:"known-issues",children:"Known issues"}),"\n",(0,s.jsxs)(n.p,{children:["Are you experiencing issue during installation or operation? Check the ",(0,s.jsx)(n.a,{href:"/docs/for-ops/sre/known-issues",children:"Known Issues page"})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8141:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/cluster-details-page-a92472aeaf27114cfa3712874dd46765.png"},5215:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/sign-in-page-72473e012cb16ab3690fcb872be4e5f8.png"},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var o=t(6540);const s={},r=o.createContext(s);function i(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);