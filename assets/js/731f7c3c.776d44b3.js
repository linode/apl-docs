"use strict";(self.webpackChunkredkubes_github_io=self.webpackChunkredkubes_github_io||[]).push([[6228],{6896:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>n,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"for-ops/disaster-recovery/overview","title":"Disaster Recovery Overview","description":"Prerequisites","source":"@site/docs/for-ops/disaster-recovery/overview.md","sourceDirName":"for-ops/disaster-recovery","slug":"/for-ops/disaster-recovery/overview","permalink":"/docs/for-ops/disaster-recovery/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/linode/linode.github.io/tree/main/docs/for-ops/disaster-recovery/overview.md","tags":[],"version":"current","frontMatter":{"slug":"overview","title":"Disaster Recovery Overview","sidebar_label":"Overview"},"sidebar":"mainSidebar","previous":{"title":"Using the CLI","permalink":"/docs/for-ops/how-to/use-the-cli"},"next":{"title":"Gitea","permalink":"/docs/for-ops/disaster-recovery/gitea"}}');var i=t(4848),o=t(8453);const n={slug:"overview",title:"Disaster Recovery Overview",sidebar_label:"Overview"},a=void 0,l={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Guides",id:"guides",level:2}];function c(e){const s={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(s.p,{children:"This area covers some potential scenarios, when a complete or partial restore of the platform is required."}),"\n",(0,i.jsx)(s.p,{children:"This guide has the following prerequisites and limitations that should be checked regularly:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"The following items should be backed up regularly by the platform administrator:"}),"\n"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:'The Kubernetes secret ending in "-wildcard-cert" in namespace "istio-system" (if installed via the Linode cloud console, or using your own certificate).'}),"\n",(0,i.jsx)(s.li,{children:'The Kubernetes secret "otomi-sops-secrets" in namespace "otomi-pipelines".'}),"\n",(0,i.jsx)(s.li,{children:"A download of the complete values in Platform -> Maintenance. Depending on whether these are downloaded with or without secrets, some passwords might have to be reset after recovery."}),"\n",(0,i.jsx)(s.li,{children:"Optionally manual backups of databases, as covered in this guide for the CloudNative PostgreSQL Operator, should be taken."}),"\n"]}),"\n",(0,i.jsxs)(s.ol,{start:"2",children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Object storage needs to be set up for all backup types referred to. Credentials should be added to Platform Settings -> Object Storage."}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"All backup types should be activated in the Platform Settings -> Backup."}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"This guide does not cover the partial or complete loss of attached object storage. For production environments, it is advised to set up additional object storage in a different region, where all contents of the platform object storage is mirrored to, and can be retrieved in the event of accidental deletes, data center availability issues etc. The transfer to and from these remote storage locations is not covered in this guide."}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Workloads may store data in local storage, object storage, different types of databases, message queues etc. The backup and recovery strategy of Workload storage is not covered here."}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Currently it is not supported to reinstall a cluster in-place that has been provisioned directly using the Linode API or Console. Such an LKE cluster must instead be reprovisioned with the application platform through a Helm install. However, since the cluster ID changes, the domainsuffix will also change. Adjustments need to be made to the values file before the restore. Also, you will need a domain name set up with a DNS provider supported by App Platform and the credentials should be added to the values file."}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["All instructions assume you are familiar with essential Kubernetes tools such as ",(0,i.jsx)(s.code,{children:"kubectl"})," and have access to the Kubernetes API. Usage of TUI applications such as ",(0,i.jsx)(s.code,{children:"k9s"})," from the administration terminal is strongly recommended."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"guides",children:"Guides"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"/docs/for-ops/disaster-recovery/gitea",children:"Gitea"}),": Restoring the platform's Gitea database and repositories from the application backup"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"/docs/for-ops/disaster-recovery/databases",children:"Databases"}),": Backup and restore of the CNPG databases"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"/docs/for-ops/disaster-recovery/reinstall",children:"Reinstall"}),": Restoring the complete platform, including settings and data"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>n,x:()=>a});var r=t(6540);const i={},o=r.createContext(i);function n(e){const s=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:n(e.components),r.createElement(o.Provider,{value:s},e.children)}}}]);