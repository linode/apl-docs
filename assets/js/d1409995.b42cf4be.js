"use strict";(self.webpackChunkredkubes_github_io=self.webpackChunkredkubes_github_io||[]).push([[4118],{18:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"for-devs/console/sealed-secrets","title":"Team Secrets","description":"Sealed Secrets are encrypted Kubernetes Secrets. The encrypted secrets are stored in the Values Git repository. When a Sealed Secrets secret is created in the Console, the Kubernetes Secret will appear in the Team\'s namespace and can be used as you would use any secret that you would have created directly.","source":"@site/docs/for-devs/console/sealed-secrets.md","sourceDirName":"for-devs/console","slug":"/for-devs/console/secrets","permalink":"/docs/for-devs/console/secrets","draft":false,"unlisted":false,"editUrl":"https://github.com/linode/linode.github.io/tree/main/docs/for-devs/console/sealed-secrets.md","tags":[],"version":"current","frontMatter":{"slug":"secrets","title":"Team Secrets","sidebar_label":"Sealed Secrets"},"sidebar":"mainSidebar","previous":{"title":"Settings","permalink":"/docs/for-devs/console/settings"},"next":{"title":"Shell","permalink":"/docs/for-devs/console/shell"}}');var r=t(4848),c=t(8453);const i={slug:"secrets",title:"Team Secrets",sidebar_label:"Sealed Secrets"},l=void 0,d={},o=[{value:"Create a Sealed Secret",id:"create-a-sealed-secret",level:2},{value:"Opaque secret",id:"opaque-secret",level:3},{value:"Service Account Token secret",id:"service-account-token-secret",level:3},{value:"Docker Config secret",id:"docker-config-secret",level:3},{value:"Docker Config Json secret",id:"docker-config-json-secret",level:3},{value:"Basic Auth secret",id:"basic-auth-secret",level:3},{value:"SSH Auth secret",id:"ssh-auth-secret",level:3},{value:"TLS secret",id:"tls-secret",level:3},{value:"Metadata",id:"metadata",level:2}];function a(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"Sealed Secrets are encrypted Kubernetes Secrets. The encrypted secrets are stored in the Values Git repository. When a Sealed Secrets secret is created in the Console, the Kubernetes Secret will appear in the Team's namespace and can be used as you would use any secret that you would have created directly."}),"\n",(0,r.jsx)(s.p,{children:"7 types of secrets are supported:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Opaque"}),"\n",(0,r.jsx)(s.li,{children:"Service Account Token"}),"\n",(0,r.jsx)(s.li,{children:"Docker Config"}),"\n",(0,r.jsx)(s.li,{children:"Docker Config Json"}),"\n",(0,r.jsx)(s.li,{children:"Basic Auth"}),"\n",(0,r.jsx)(s.li,{children:"SSH Auth"}),"\n",(0,r.jsx)(s.li,{children:"TLS"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"create-a-sealed-secret",children:"Create a Sealed Secret"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Provide a name for the Sealed Secret. The Kubernetes secret will have the same name."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Select ",(0,r.jsx)(s.code,{children:"Immutable"})," if the data of the Sealed Secret (and the Kubernetes secret) can not be updated after the Sealed Secret has been created. When the Sealed Secret is Immutable, only the metadata can be modified after creation."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Select the Type:"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"opaque-secret",children:"Opaque secret"}),"\n",(0,r.jsxs)(s.p,{children:["Opaque is the default secret type in Kubernetes. Read more about Opaque secrets ",(0,r.jsx)(s.a,{href:"https://kubernetes.io/docs/concepts/configuration/secret/#opaque-secrets",children:"here"}),"."]}),"\n",(0,r.jsxs)(s.ol,{start:"4",children:["\n",(0,r.jsxs)(s.li,{children:["Add the ",(0,r.jsx)(s.code,{children:"Encrypted data"}),":"]}),"\n"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Key"}),(0,r.jsx)(s.th,{children:"Value"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Name of the Key"}),(0,r.jsx)(s.td,{children:"The value of the data item"})]})})]}),"\n",(0,r.jsxs)(s.ol,{start:"5",children:["\n",(0,r.jsx)(s.li,{children:"Add more data items if needed."}),"\n"]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"The secret value will only be visible at the time of creation or once it has been successfully synchronized with the cluster."})}),"\n",(0,r.jsx)(s.h3,{id:"service-account-token-secret",children:"Service Account Token secret"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Key"}),(0,r.jsx)(s.th,{children:"Value"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"extra"}),(0,r.jsx)(s.td,{children:"The token"})]})})]}),"\n",(0,r.jsxs)(s.p,{children:["See ",(0,r.jsx)(s.a,{href:"https://kubernetes.io/docs/concepts/configuration/secret/#serviceaccount-token-secrets%22",children:"here"})," for more information about service account token secrets."]}),"\n",(0,r.jsxs)(s.p,{children:["You need to ensure that the ",(0,r.jsx)(s.code,{children:"kubernetes.io/service-account.name"})," annotation is set to an existing ServiceAccount name. See the ",(0,r.jsx)(s.a,{href:"#metadata",children:"metadata"})," section for adding annotations."]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"The secret value will only be visible at the time of creation or once it has been successfully synchronized with the cluster."})}),"\n",(0,r.jsx)(s.h3,{id:"docker-config-secret",children:"Docker Config secret"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Key"}),(0,r.jsx)(s.th,{children:"Value"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:".dockercfg"}),(0,r.jsxs)(s.td,{children:["a .dockerconfigjson key for which the value is the content of a base64 encoded ",(0,r.jsx)(s.code,{children:"~/.docker/config.json"})," file"]})]})})]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"The secret value will only be visible at the time of creation or once it has been successfully synchronized with the cluster."})}),"\n",(0,r.jsx)(s.h3,{id:"docker-config-json-secret",children:"Docker Config Json secret"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Key"}),(0,r.jsx)(s.th,{children:"Value"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:".dockerconfigjson"}),(0,r.jsxs)(s.td,{children:["a .dockerconfigjson key ",(0,r.jsx)(s.code,{children:"~/.docker/config.json"})," file"]})]})})]}),"\n",(0,r.jsxs)(s.p,{children:["Example of a ",(0,r.jsx)(s.code,{children:"config.json"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n"auths": {\n  "my-registry.example:5000": {\n    "username":"tiger",\n    "password":"pass1234",\n    "email":"tiger@acme.example",\n    "auth":"the-authentication-key"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(s.p,{children:"Use the following command to create the json:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'email="not@us.ed" # can be something else if the registry provider expects it, but usually this is ignored\nserver="" # example: "https://harbor.myclusterid.akamai-apl.net/"\nusername="" # your username\npassword="" # your password, can be token\nkubectl create secret docker-registry --dry-run=client regcred --docker-email=$email --docker-server=$server --docker-username=$username --docker-password=$password -o jsonpath=\'{.data.\\.dockerconfigjson}\' | base64 --decode\n'})}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"The secret value will only be visible at the time of creation or once it has been successfully synchronized with the cluster."})}),"\n",(0,r.jsx)(s.h3,{id:"basic-auth-secret",children:"Basic Auth secret"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Key"}),(0,r.jsx)(s.th,{children:"Value"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"username"}),(0,r.jsx)(s.td,{children:"a username"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"password"}),(0,r.jsx)(s.td,{children:"a password"})]})]})]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"The secret value will only be visible at the time of creation or once it has been successfully synchronized with the cluster."})}),"\n",(0,r.jsx)(s.h3,{id:"ssh-auth-secret",children:"SSH Auth secret"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Key"}),(0,r.jsx)(s.th,{children:"Value"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"ssh-privatekey"}),(0,r.jsxs)(s.td,{children:["a ",(0,r.jsx)(s.code,{children:"ssh-privatekey"})," key-value pair in the data field as the SSH credential to use"]})]})})]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"The secret value will only be visible at the time of creation or once it has been successfully synchronized with the cluster."})}),"\n",(0,r.jsx)(s.h3,{id:"tls-secret",children:"TLS secret"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Key"}),(0,r.jsx)(s.th,{children:"Value"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"tls.crt"}),(0,r.jsx)(s.td,{children:"The PEM encoded public key certificate"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"tls.key"}),(0,r.jsx)(s.td,{children:"The private key certificate content"})]})]})]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"The secret value will only be visible at the time of creation or once it has been successfully synchronized with the cluster."})}),"\n",(0,r.jsx)(s.h2,{id:"metadata",children:"Metadata"}),"\n",(0,r.jsx)(s.p,{children:"Adding metadata is optional."}),"\n",(0,r.jsx)(s.p,{children:"Add the following standard metadata to the sealed-secret:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Annotations"}),". See ",(0,r.jsx)(s.a,{href:"https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/",children:"here"})," for more information about annotations"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Finalizers"}),". See ",(0,r.jsx)(s.a,{href:"https://kubernetes.io/docs/concepts/overview/working-with-objects/finalizers/",children:"here"})," for more information about finalizers"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Labels"}),". See ",(0,r.jsx)(s.a,{href:"https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/",children:"here"})," for more information about labels"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Click on ",(0,r.jsx)(s.code,{children:"+ Add Item"})," and add a key-value pair."]})]})}function h(e={}){const{wrapper:s}={...(0,c.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>i,x:()=>l});var n=t(6540);const r={},c=n.createContext(r);function i(e){const s=n.useContext(c);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(c.Provider,{value:s},e.children)}}}]);