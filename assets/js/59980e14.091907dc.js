"use strict";(self.webpackChunkredkubes_github_io=self.webpackChunkredkubes_github_io||[]).push([[2756],{5669:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"get-started/labs/create-secrets","title":"Create Secrets","description":"In this lab we will create a secret using Sealed Secrets and see how to securely store sensitive information in a git repository.","source":"@site/docs/get-started/labs/create-secrets.md","sourceDirName":"get-started/labs","slug":"/get-started/labs/create-secrets","permalink":"/docs/get-started/labs/create-secrets","draft":false,"unlisted":false,"editUrl":"https://github.com/linode/linode.github.io/tree/main/docs/get-started/labs/create-secrets.md","tags":[],"version":"current","frontMatter":{"slug":"create-secrets","title":"Create Secrets","sidebar_label":"Create Secrets"},"sidebar":"mainSidebar","previous":{"title":"Manually Push Images","permalink":"/docs/get-started/labs/push-images"},"next":{"title":"Using Argo CD","permalink":"/docs/get-started/labs/using-argo-cd"}}');var r=s(4848),c=s(8453);const i={slug:"create-secrets",title:"Create Secrets",sidebar_label:"Create Secrets"},a=void 0,l={},d=[{value:"Creating a Secret",id:"creating-a-secret",level:2},{value:"Checking the GIT repository",id:"checking-the-git-repository",level:2},{value:"Checking the Kubernetes secret",id:"checking-the-kubernetes-secret",level:2}];function o(e){const t={admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"In this lab we will create a secret using Sealed Secrets and see how to securely store sensitive information in a git repository."}),"\n",(0,r.jsx)(t.h2,{id:"creating-a-secret",children:"Creating a Secret"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Click on the ",(0,r.jsx)(t.code,{children:"Secrets"})," in the sidebar."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Click on ",(0,r.jsx)(t.code,{children:"Create Secret"}),". This will take you to the page where you can create a secret."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Fill in a name for your secret. In this lab we will use the name ",(0,r.jsx)(t.code,{children:"secret-credentials"})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Select the secret type. In this lab we will create a secret of type ",(0,r.jsx)(t.code,{children:"kubernetes.io/opaque"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Click on ",(0,r.jsx)(t.code,{children:"+Add another"})," so you can fill in two key-value pairs"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["In the ",(0,r.jsx)(t.code,{children:"Secret data"})," section. Add the following key-value pairs:"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.code,{children:"key=password value=helloworld"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.code,{children:"key=username value=labs-user"})}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Create secret",src:s(5599).A+"",width:"2392",height:"1492"})}),"\n",(0,r.jsxs)(t.ol,{start:"7",children:["\n",(0,r.jsxs)(t.li,{children:["Click on ",(0,r.jsx)(t.code,{children:"Create Secret"}),"."]}),"\n"]}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsxs)(t.p,{children:["The secret value will only be visible at the time of creation. After creation, the value field will display asterisks ",(0,r.jsx)(t.code,{children:"****"})," to indicate the data is encrypted and cannot be revealed through the interface, though it can be overwritten. To overwrite the secret, click on the lock ",(0,r.jsx)(t.code,{children:"\ud83d\udd12"})," icon next to the value field, enter the new secret value, and click on ",(0,r.jsx)(t.code,{children:"Save Changes"}),"."]})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{alt:"Created secret",src:s(8909).A+"",width:"2378",height:"1636"}),"\n",(0,r.jsx)(t.img,{alt:"Edit secret",src:s(3488).A+"",width:"2384",height:"1658"})]}),"\n",(0,r.jsx)(t.h2,{id:"checking-the-git-repository",children:"Checking the GIT repository"}),"\n",(0,r.jsxs)(t.p,{children:["Now go to Gitea and check the ",(0,r.jsx)(t.code,{children:"otomi/values"})," repository. You will see that under ",(0,r.jsx)(t.code,{children:"values/env/teams/<team-name>/sealedsecrets/secret-credentials.yaml"})," the secret is stored in yaml, but the values are encrypted."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Repository secret",src:s(3775).A+"",width:"2634",height:"1398"})}),"\n",(0,r.jsx)(t.h2,{id:"checking-the-kubernetes-secret",children:"Checking the Kubernetes secret"}),"\n",(0,r.jsx)(t.p,{children:"The only way to see the values of the secret is to decrypt the secret. The secret values are stored as base64 encoded values. In the left menu click on Shell and run the following command:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"kubectl get secret secret-credentials -o yaml -n team-labs\n"})}),"\n",(0,r.jsx)(t.p,{children:"This wil return the secret in yaml format. The values are stored as base64 encoded values."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"apiVersion: v1\ndata:\n  password: aGVsbG93b3JsZA==\n  username: bGFicy11c2Vy\nkind: Secret\nmetadata:\n  creationTimestamp: '2025-11-11T13:44:16Z'\n  name: secret-credentials\n  namespace: team-labs\n  ownerReferences:\n    - apiVersion: bitnami.com/v1alpha1\n      controller: true\n      kind: SealedSecret\n      name: secret-credentials\n      uid: fc1014f6-0212-49f7-a95d-c4169e053b60\n  resourceVersion: '240057431'\n  uid: b76d6944-fa91-4392-ba4c-80e3e07c7e82\ntype: kubernetes.io/opaque\n"})}),"\n",(0,r.jsxs)(t.p,{children:["If you want to decode the secret you can use ",(0,r.jsx)(t.code,{children:"base64 --decode"}),". Run the following command:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'kubectl get secret secret-credentials -n team-labs -o jsonpath="{.data.password}" | base64 --decode\n'})}),"\n",(0,r.jsx)(t.p,{children:"Expected output:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"helloworld\n"})})]})}function h(e={}){const{wrapper:t}={...(0,c.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},5599:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/create-secret-58c9b5e8a22a416434dd992654f5ab93.png"},3488:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/created-secret-edit-12153471713399a7ddce335f0b2cceb9.png"},8909:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/created-secret-a0907297ff6ffb33d335d5e640597727.png"},3775:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/repository-secret-fb142b26efdd1d18c679eaea55c010f8.png"},8453:(e,t,s)=>{s.d(t,{R:()=>i,x:()=>a});var n=s(6540);const r={},c=n.createContext(r);function i(e){const t=n.useContext(c);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(c.Provider,{value:t},e.children)}}}]);