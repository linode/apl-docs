"use strict";(self.webpackChunkredkubes_github_io=self.webpackChunkredkubes_github_io||[]).push([[3164],{1628:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"apps/argocd","title":"Argo CD","description":"About","source":"@site/docs/apps/argocd.md","sourceDirName":"apps","slug":"/apps/argocd","permalink":"/docs/apps/argocd","draft":false,"unlisted":false,"editUrl":"https://github.com/linode/linode.github.io/tree/main/docs/apps/argocd.md","tags":[],"version":"current","frontMatter":{"slug":"argocd","title":"Argo CD","sidebar_label":"Argo CD"},"sidebar":"mainSidebar","previous":{"title":"Alertmanager","permalink":"/docs/apps/alertmanager"},"next":{"title":"Cert-Manager","permalink":"/docs/apps/certmanager"}}');var n=o(4848),r=o(8453);const i={slug:"argocd",title:"Argo CD",sidebar_label:"Argo CD"},a=void 0,l={},d=[{value:"About",id:"about",level:2},{value:"Known issues",id:"known-issues",level:2}];function c(e){const t={a:"a",code:"code",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"about",children:"About"}),"\n",(0,n.jsxs)(t.p,{children:["Argo CD is a declarative, GitOps continuous delivery tool for Kubernetes. Argo CD is configured to use the SSO provided by Keycloak, and maps groups to Argo CD roles. The ",(0,n.jsx)(t.code,{children:"platform-admins"})," role is made super admin within Argo CD. The platform-admins role has access to Argo CD and is admin of all team projects. Members of team roles are only allowed to administer their own projects. All Teams will automatically get access to a Git repo, and Argo CD is configured to listen to this repo. All a team has to do is to fill their repo with intended state, commit, and automation takes care of the rest."]}),"\n",(0,n.jsxs)(t.p,{children:["Teams will be be automatically given a git repository in Gitea named ",(0,n.jsx)(t.code,{children:"team-$teamId-argocd"}),", and Argo CD is automatically configured to access the repository and sync. All that is left to do is for a team-admin (or team member with self-service rights) to fill their repository with intended state and commit."]}),"\n",(0,n.jsx)(t.p,{children:"Argo CD is configured to use the SSO provided by keycloak, and maps groups to Argo CD roles:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Group ",(0,n.jsx)(t.code,{children:"platform-admins"})," is made super admin within Argo CD"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Group team-admins has access, and is admin of all Team projects"}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Team members are only allowed access and to administer their own projects"}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["Teams will be be automatically given a git repository in Gitea named ",(0,n.jsx)(t.code,{children:"team-$teamId-argocd"}),", and Argo CD is automatically configured to access the repository and sync. All that is left to do is Teams to fill their repository with the intended state (manifests) and commit."]}),"\n",(0,n.jsx)(t.h2,{id:"known-issues",children:"Known issues"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Problem:"})}),"\n",(0,n.jsxs)(t.p,{children:["Argo CD shows the following sync error: ",(0,n.jsx)(t.code,{children:"invalid memory address or nil pointer dereference"}),"."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Cause:"})}),"\n",(0,n.jsxs)(t.p,{children:["See the issue on ",(0,n.jsx)(t.a,{href:"https://github.com/argoproj/argo-cd/issues/14098",children:"Github"})]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Solution:"})}),"\n",(0,n.jsx)(t.p,{children:"Delete the Argo CD Application Controller Pod"})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8453:(e,t,o)=>{o.d(t,{R:()=>i,x:()=>a});var s=o(6540);const n={},r=s.createContext(n);function i(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);