"use strict";(self.webpackChunkredkubes_github_io=self.webpackChunkredkubes_github_io||[]).push([[6128],{4422:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>c,metadata:()=>n,toc:()=>i});var o=t(5893),r=t(1151);const c={slug:"catalog",title:"Managing the Catalog",sidebar_label:"Manage the Catalog"},s=void 0,n={id:"for-ops/how-to/use-catalog",title:"Managing the Catalog",description:"APL offers a Catalog to Teams on the platform to offer them golden path templates (Helm charts). This is how it works:",source:"@site/docs/for-ops/how-to/use-catalog.md",sourceDirName:"for-ops/how-to",slug:"/for-ops/how-to/catalog",permalink:"/docs/for-ops/how-to/catalog",draft:!1,unlisted:!1,editUrl:"https://github.com/linode/linode.github.io/tree/main/docs/for-ops/how-to/use-catalog.md",tags:[],version:"current",frontMatter:{slug:"catalog",title:"Managing the Catalog",sidebar_label:"Manage the Catalog"},sidebar:"mainSidebar",previous:{title:"Overview",permalink:"/docs/for-ops/how-to/overview"},next:{title:"Manage Ingress Controllers",permalink:"/docs/for-ops/how-to/ingress-classes"}},l={},i=[{value:"Quick start Helm charts",id:"quick-start-helm-charts",level:2},{value:"k8s-deployment",id:"k8s-deployment",level:3},{value:"k8s-deployment-otel",id:"k8s-deployment-otel",level:3},{value:"k8s-deployments-canary",id:"k8s-deployments-canary",level:3},{value:"knative-service",id:"knative-service",level:3},{value:"APL quick start for creating a PostgreSQL cluster",id:"apl-quick-start-for-creating-a-postgresql-cluster",level:3},{value:"APL quick start for creating a Redis master-replica cluster",id:"apl-quick-start-for-creating-a-redis-master-replica-cluster",level:3},{value:"Customize the catalog",id:"customize-the-catalog",level:2},{value:"Configure chart access",id:"configure-chart-access",level:2},{value:"Everybody",id:"everybody",level:3},{value:"Specific teams",id:"specific-teams",level:3}];function d(e){const a={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.p,{children:"APL offers a Catalog to Teams on the platform to offer them golden path templates (Helm charts). This is how it works:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:["\n",(0,o.jsxs)(a.p,{children:["Add a Helm chart to the ",(0,o.jsx)(a.code,{children:"otomi/charts"})," repo in the local Gitea."]}),"\n"]}),"\n",(0,o.jsxs)(a.li,{children:["\n",(0,o.jsx)(a.p,{children:"Configure which Teams can use the chart."}),"\n"]}),"\n",(0,o.jsxs)(a.li,{children:["\n",(0,o.jsx)(a.p,{children:"Teams can create Workloads from the Catalog."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(a.p,{children:["After APL is installed, the catalog (the ",(0,o.jsx)(a.code,{children:"otomi/charts"})," repo) will contain a set of quick start Helm charts. The APL provided Helm charts are not mandatory to use and can be removed or modified to your own liking. They are only provided to make it easier to get started."]}),"\n",(0,o.jsx)(a.h2,{id:"quick-start-helm-charts",children:"Quick start Helm charts"}),"\n",(0,o.jsx)(a.p,{children:"The Catalog contains a set of Helm charts that can be used as quick starts. The following quick starts are available:"}),"\n",(0,o.jsx)(a.h3,{id:"k8s-deployment",children:"k8s-deployment"}),"\n",(0,o.jsxs)(a.p,{children:["The ",(0,o.jsx)(a.code,{children:"quickstart-k8s-deployment"})," Helm chart can be used to create a Kubernetes ",(0,o.jsx)(a.code,{children:"Deployment"})," (to deploy a single image), a ",(0,o.jsx)(a.code,{children:"Service"})," and a ",(0,o.jsx)(a.code,{children:"ServiceAccount"}),". Optionally a ",(0,o.jsx)(a.code,{children:"HorizontalPodAutoscaler"}),", a Prometheus ",(0,o.jsx)(a.code,{children:"ServiceMonitor"})," and a ",(0,o.jsx)(a.code,{children:"Configmap"})," can be created."]}),"\n",(0,o.jsx)(a.h3,{id:"k8s-deployment-otel",children:"k8s-deployment-otel"}),"\n",(0,o.jsxs)(a.p,{children:["The ",(0,o.jsx)(a.code,{children:"quickstart-k8s-deployment-otel"})," Helm chart can be used to create a Kubernetes ",(0,o.jsx)(a.code,{children:"Deployment"})," (to deploy a single image), a ",(0,o.jsx)(a.code,{children:"Service"}),", a ",(0,o.jsx)(a.code,{children:"ServiceAccount"}),", an ",(0,o.jsx)(a.code,{children:"OpenTelemetryCollector"})," and an ",(0,o.jsx)(a.code,{children:"Instrumentation"}),". Optionally a ",(0,o.jsx)(a.code,{children:"HorizontalPodAutoscaler"}),", a Prometheus ",(0,o.jsx)(a.code,{children:"ServiceMonitor"})," and a ",(0,o.jsx)(a.code,{children:"Configmap"})," can be created."]}),"\n",(0,o.jsx)(a.h3,{id:"k8s-deployments-canary",children:"k8s-deployments-canary"}),"\n",(0,o.jsxs)(a.p,{children:["The ",(0,o.jsx)(a.code,{children:"quickstart-k8s-deployments-canary"})," Helm chart can be used to create 2 Kubernetes ",(0,o.jsx)(a.code,{children:"Deployments"})," (to deploy 2 versions of an image), a ",(0,o.jsx)(a.code,{children:"Service"})," and a ",(0,o.jsx)(a.code,{children:"ServiceAccount"}),". Optionally a ",(0,o.jsx)(a.code,{children:"HorizontalPodAutoscaler"}),", a Prometheus ",(0,o.jsx)(a.code,{children:"ServiceMonitor"})," and a ",(0,o.jsx)(a.code,{children:"Configmap"})," (for each version) can be created."]}),"\n",(0,o.jsx)(a.h3,{id:"knative-service",children:"knative-service"}),"\n",(0,o.jsxs)(a.p,{children:["The ",(0,o.jsx)(a.code,{children:"quickstart-knative-service"})," Helm chart can be used to create a Knative ",(0,o.jsx)(a.code,{children:"Service"})," (to deploy a single image), a ",(0,o.jsx)(a.code,{children:"Service"})," and a  ",(0,o.jsx)(a.code,{children:"ServiceAccount"}),". Optionally a Prometheus ",(0,o.jsx)(a.code,{children:"ServiceMonitor"})," can be created."]}),"\n",(0,o.jsx)(a.h3,{id:"apl-quick-start-for-creating-a-postgresql-cluster",children:"APL quick start for creating a PostgreSQL cluster"}),"\n",(0,o.jsxs)(a.p,{children:["The ",(0,o.jsx)(a.code,{children:"quickstart-postgresql"})," Helm chart can be used to create a cloudnativepg PostgreSQL ",(0,o.jsx)(a.code,{children:"Cluster"}),". Optionally a Prometheus ",(0,o.jsx)(a.code,{children:"PodMonitor"})," and a ",(0,o.jsx)(a.code,{children:"Configmap"})," (for adding a postgresql dashboard to Grafana) can be created."]}),"\n",(0,o.jsx)(a.h3,{id:"apl-quick-start-for-creating-a-redis-master-replica-cluster",children:"APL quick start for creating a Redis master-replica cluster"}),"\n",(0,o.jsxs)(a.p,{children:["The ",(0,o.jsx)(a.code,{children:"quickstart-redis"})," Helm chart can be used to create a Redis master-replica cluster."]}),"\n",(0,o.jsx)(a.h2,{id:"customize-the-catalog",children:"Customize the catalog"}),"\n",(0,o.jsxs)(a.p,{children:["The APL provided charts are not mandetory to use and can be removed or modified to your own liking. They are only provided to make it easier to get started. To manage the catalog, just pull the ",(0,o.jsx)(a.code,{children:"otomi/charts"})," repo, add the Helm charts you would like to make available and push changes. A newly added chart will immediately become available in the catalog for Teams to use."]}),"\n",(0,o.jsx)(a.h2,{id:"configure-chart-access",children:"Configure chart access"}),"\n",(0,o.jsx)(a.p,{children:"For charts to become available for Teams to use, Teams need to be given access to use a chart. The catalog supports the following access options:"}),"\n",(0,o.jsx)(a.h3,{id:"everybody",children:"Everybody"}),"\n",(0,o.jsxs)(a.p,{children:["If a chart can be used by all teams, including the ",(0,o.jsx)(a.code,{children:"team-admin"})," Team, add the following to the ",(0,o.jsx)(a.code,{children:"rbac.yaml"})," in the root of the ",(0,o.jsx)(a.code,{children:"otomi/charts"})," repository:"]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-yaml",children:"rbac:\n  chart-name: null\n"})}),"\n",(0,o.jsx)(a.h3,{id:"specific-teams",children:"Specific teams"}),"\n",(0,o.jsxs)(a.p,{children:["If a chart is only allowed to be used by one or more specific teams, add the following to the ",(0,o.jsx)(a.code,{children:"rbac.yaml"}),":"]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-yaml",children:"rbac:\n  chart-name:\n    - team-demo\n    - team-hello\n"})}),"\n",(0,o.jsxs)(a.p,{children:["To allow a chart to be used by the ",(0,o.jsx)(a.code,{children:"team-admin"})," only, add the following to the ",(0,o.jsx)(a.code,{children:"rbac.yaml"}),":"]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-yaml",children:"rbac:\n  chart-name:\n    - team-admin\n"})})]})}function h(e={}){const{wrapper:a}={...(0,r.a)(),...e.components};return a?(0,o.jsx)(a,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},1151:(e,a,t)=>{t.d(a,{Z:()=>n,a:()=>s});var o=t(7294);const r={},c=o.createContext(r);function s(e){const a=o.useContext(c);return o.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function n(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(c.Provider,{value:a},e.children)}}}]);