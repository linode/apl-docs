"use strict";(self.webpackChunkredkubes_github_io=self.webpackChunkredkubes_github_io||[]).push([[4655],{6791:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var i=s(5893),l=s(1151);const o={slug:"use-team-admin",title:"Use team-admin",sidebar_label:"Use Team Admin"},t=void 0,a={id:"for-ops/how-to/use-team-admin",title:"Use team-admin",description:"By default a team called team-admin is created. The Admin Team is no regular team. This team for instance has no apps. Instead the admin needs to use the platform apps to see logs and metrics of workloads deployed in the team-admin namespace.",source:"@site/docs/for-ops/how-to/use-team-admin.md",sourceDirName:"for-ops/how-to",slug:"/for-ops/how-to/use-team-admin",permalink:"/docs/for-ops/how-to/use-team-admin",draft:!1,unlisted:!1,editUrl:"https://github.com/linode/linode.github.io/tree/main/docs/for-ops/how-to/use-team-admin.md",tags:[],version:"current",frontMatter:{slug:"use-team-admin",title:"Use team-admin",sidebar_label:"Use Team Admin"},sidebar:"mainSidebar",previous:{title:"Manage Ingress Controllers",permalink:"/docs/for-ops/how-to/ingress-classes"},next:{title:"Use Core only",permalink:"/docs/for-ops/how-to/core-only"}},r={},c=[{value:"Create workloads in any namespace",id:"create-workloads-in-any-namespace",level:2},{value:"Publicly expose a service deployed in any namespace",id:"publicly-expose-a-service-deployed-in-any-namespace",level:2}];function d(e){const n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["By default a team called ",(0,i.jsx)(n.code,{children:"team-admin"})," is created. The Admin Team is no regular team. This team for instance has no apps. Instead the admin needs to use the platform apps to see logs and metrics of workloads deployed in the ",(0,i.jsx)(n.code,{children:"team-admin"})," namespace."]}),"\n",(0,i.jsx)(n.p,{children:"The Admin Team can be used by admins to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Deploy workloads in any namespace"}),"\n",(0,i.jsx)(n.li,{children:"Configure ingress for any service in any namespace"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This makes it possible for admin to add any kind of tool to the platform and use the Services self-service feature to expose the UI of the tool and configure SSO."}),"\n",(0,i.jsx)(n.h2,{id:"create-workloads-in-any-namespace",children:"Create workloads in any namespace"}),"\n",(0,i.jsxs)(n.p,{children:["To create workloads in a custom namespace (namespaces not owned by teams), first create a namespace with label ",(0,i.jsx)(n.code,{children:"istio-injection: enabled"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"kubectl create namespace my-namespace\nkubectl label namespace my-namespace istio-injection=enabled\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You can now create a workload to deploy Helm charts to this new namespace. In this example we'll use the deployment chart in the ",(0,i.jsx)(n.code,{children:"otomi-charts"})," repo. In the left menu, under ",(0,i.jsx)(n.code,{children:"team-admin"})," click ",(0,i.jsx)(n.code,{children:"Workloads"})," and then click ",(0,i.jsx)(n.code,{children:"Create Workload"}),"."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Enter a name for the workload:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"hello-deploy\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Enter the URL to the Git repo containing the Helm Chart or a Helm repository:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"https://github.com/linode/apl-charts.git\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Enter the path of the chart:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"quickstart-k8s-deployment\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Enter the revision. In case of using a Git repo, this can be commit, tag, or branch. If omitted, will equal to HEAD. In case of using a Chart repository, this is a semver tag for the Chart's version"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Enter the name of the namespace where the workload will be deployed:"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"my-namespace\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.code,{children:"Submit"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"After submitting the new workload specs, the values editor will be shown. Here you can edit the chart values."}),"\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click on ",(0,i.jsx)(n.code,{children:"Edit"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Add the following (minimal) values:"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"fullnameOverride: hello-deploy\nimage:\n  repository: otomi/nodejs-helloworld\n  tag: v1.2.13\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"9",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click on ",(0,i.jsx)(n.code,{children:"Submit"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click on ",(0,i.jsx)(n.code,{children:"Deploy Changes"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"publicly-expose-a-service-deployed-in-any-namespace",children:"Publicly expose a service deployed in any namespace"}),"\n",(0,i.jsxs)(n.p,{children:["The Services in ",(0,i.jsx)(n.code,{children:"team-admin"})," can be used to publicly expose services deployed in any namespace. The only requirement is that the namespace has the label ",(0,i.jsx)(n.code,{children:"istio-injection: enabled"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Let's now configure public exposure for the workload we deployed in the namespace ",(0,i.jsx)(n.code,{children:"my-namespace"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["In the left menu panel under click ",(0,i.jsx)(n.code,{children:"Services"})," then click on ",(0,i.jsx)(n.code,{children:"Create Service"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Fill in the name of the Kubernetes service (hello-deploy) that you already deployed."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Fill in the namespace where the service is deployed (my-namespace in this example)."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Fill in the port of the service (8080 in this case)."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Under ",(0,i.jsx)(n.code,{children:"Exposure Ingress"}),", select ",(0,i.jsx)(n.code,{children:"Ingress"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Turn off ",(0,i.jsx)(n.code,{children:"Use team domain"})," and fill in the name of the service as the hostname (hello-deploy in this example)."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click on ",(0,i.jsx)(n.code,{children:"Submit"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click on ",(0,i.jsx)(n.code,{children:"Deploy Changes"})," (the Deploy Changes button in the left panel will light-up after you click on submit)."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Your service and URL will now show up in the list of Services."})]})}function h(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>a,a:()=>t});var i=s(7294);const l={},o=i.createContext(l);function t(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);